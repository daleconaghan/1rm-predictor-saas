{% extends "base.html" %}

{% block title %}Results - 1RM Predictor{% endblock %}

{% block content %}
<div class="container my-5">
    <div class="row">
        <div class="col-md-10 mx-auto">
            <div class="text-center mb-4">
                <i class="fas fa-trophy fa-3x text-primary mb-3"></i>
                <h2>Your 1RM Results</h2>
                <p class="text-muted">{{ exercise.replace('_', ' ').title() }} - {{ weight }} {{ weight_unit }} Ã— {{ reps }} reps</p>
            </div>
            
            <div class="row g-4 mb-5">
                <div class="col-md-6">
                    <div class="card border-primary h-100">
                        <div class="card-header bg-primary text-white text-center">
                            <h5 class="mb-0"><i class="fas fa-calculator"></i> Predicted 1RM</h5>
                        </div>
                        <div class="card-body text-center">
                            <h1 class="display-4 text-primary mb-3">{{ average_1rm }} {{ weight_unit }}</h1>
                            <p class="text-muted">Average of 5 proven formulas</p>
                            
                            <div class="row g-2 mt-3">
                                <div class="col-6">
                                    <small class="text-muted">Epley:</small><br>
                                    <strong>{{ formulas.epley }} {{ weight_unit }}</strong>
                                </div>
                                <div class="col-6">
                                    <small class="text-muted">Brzycki:</small><br>
                                    <strong>{{ formulas.brzycki }} {{ weight_unit }}</strong>
                                </div>
                                <div class="col-6">
                                    <small class="text-muted">Lander:</small><br>
                                    <strong>{{ formulas.lander }} {{ weight_unit }}</strong>
                                </div>
                                <div class="col-6">
                                    <small class="text-muted">Lombardi:</small><br>
                                    <strong>{{ formulas.lombardi }} {{ weight_unit }}</strong>
                                </div>
                                <div class="col-12">
                                    <small class="text-muted">Mayhew:</small><br>
                                    <strong>{{ formulas.mayhew }} {{ weight_unit }}</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="card border-success h-100">
                        <div class="card-header bg-success text-white text-center">
                            <h5 class="mb-0"><i class="fas fa-medal"></i> Strength Level</h5>
                        </div>
                        <div class="card-body text-center">
                            <h2 class="text-success mb-3">{{ strength_level }}</h2>
                            
                            {% set level_info = {
                                'Beginner': {'color': 'secondary', 'icon': 'seedling', 'desc': 'Just starting your strength journey'},
                                'Novice': {'color': 'info', 'icon': 'star', 'desc': 'Building solid foundation'},
                                'Intermediate': {'color': 'warning', 'icon': 'fire', 'desc': 'Making consistent progress'},
                                'Advanced': {'color': 'success', 'icon': 'trophy', 'desc': 'Excellent strength levels'},
                                'Elite': {'color': 'danger', 'icon': 'crown', 'desc': 'Top tier athlete strength'}
                            } %}
                            
                            {% if strength_level in level_info %}
                            <i class="fas fa-{{ level_info[strength_level].icon }} fa-3x text-{{ level_info[strength_level].color }} mb-3"></i>
                            <p class="text-muted">{{ level_info[strength_level].desc }}</p>
                            {% endif %}
                            
                            <div class="progress mb-3" style="height: 10px;">
                                {% set progress = {'Beginner': 20, 'Novice': 40, 'Intermediate': 60, 'Advanced': 80, 'Elite': 100}.get(strength_level, 0) %}
                                <div class="progress-bar bg-{{ level_info.get(strength_level, {}).get('color', 'primary') }}" 
                                     style="width: {{ progress }}%"></div>
                            </div>
                            <small class="text-muted">Strength progression</small>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card mb-4">
                <div class="card-header bg-warning text-dark">
                    <h5 class="mb-0"><i class="fas fa-bullseye"></i> Training Recommendations</h5>
                </div>
                <div class="card-body">
                    <div class="row g-3">
                        {% set training_zones = [
                            ('Strength (1-3 reps)', 90, 100, 'danger'),
                            ('Power (3-5 reps)', 85, 95, 'warning'),
                            ('Hypertrophy (6-12 reps)', 65, 85, 'success'),
                            ('Endurance (12+ reps)', 50, 70, 'info')
                        ] %}
                        
                        {% for zone, min_pct, max_pct, color in training_zones %}
                        <div class="col-md-6">
                            <div class="card border-{{ color }}">
                                <div class="card-body text-center">
                                    <h6 class="text-{{ color }}">{{ zone }}</h6>
                                    <h4>{{ (average_1rm * min_pct / 100) | round(1) }} - {{ (average_1rm * max_pct / 100) | round(1) }} {{ weight_unit }}</h4>
                                    <small class="text-muted">{{ min_pct }}% - {{ max_pct }}% of 1RM</small>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0"><i class="fas fa-lightbulb"></i> Personalized Recommendations</h5>
                </div>
                <div class="card-body">
                    {% for recommendation in recommendations %}
                        {% if recommendation.startswith('ðŸŽ¯ Next Goal:') %}
                            <div class="alert alert-success">
                                <strong>{{ recommendation }}</strong>
                            </div>
                        {% elif recommendation.startswith('\n') %}
                            <h6 class="mt-3 mb-2 text-primary">{{ recommendation.strip() }}</h6>
                        {% else %}
                            <p class="mb-1">{{ recommendation }}</p>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
            
            <div class="text-center mt-4">
                <a href="{{ url_for('calculate') }}" class="btn btn-primary me-3">
                    <i class="fas fa-calculator"></i> Calculate Another
                </a>
                <a href="{{ url_for('history') }}" class="btn btn-outline-primary">
                    <i class="fas fa-history"></i> View History
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}